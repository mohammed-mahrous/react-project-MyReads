(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){e.exports=a(35)},33:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(12),c=a.n(r),l=a(39),s=a(38),i=(a(5),a(37)),u=a(6),m=a(9),h="https://reactnd-books-api.udacity.com",f=localStorage.token;f||(f=localStorage.token=Math.random().toString(36).substr(-8));var d={Accept:"application/json",Authorization:f},b=function(e){return fetch("".concat(h,"/books/").concat(e),{headers:d}).then(function(e){return e.json()}).then(function(e){return e.book})},k=function(){return fetch("".concat(h,"/books"),{headers:d}).then(function(e){return e.json()}).then(function(e){return e.books})},E=function(e,t){return fetch("".concat(h,"/books/").concat(e.id),{method:"PUT",headers:Object(m.a)({},d,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},p=function(e){return fetch("".concat(h,"/search"),{method:"POST",headers:Object(m.a)({},d,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})};var v=function(e){var t=function(e,t){E(e,t).then(function(e){f(t)})},a=e.book,r=Object(n.useState)(a),c=Object(u.a)(r,2),l=c[0],s=c[1],i=Object(n.useState)(l.shelf),m=Object(u.a)(i,2),h=m[0],f=m[1];return Object(n.useEffect)(function(){b(a.id).then(function(e){f(e.shelf),s(e)})},[]),o.a.createElement("li",null,o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(a.imageLinks.thumbnail?a.imageLinks.thumbnail:"http://i.imgur.com/sJ3CT4V.gif",")")}}),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",null,o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"===h,onClick:function(){t(a,"currentlyReading")}},"currentlyReading"===h&&String.fromCharCode(10003),"Currently Reading"),o.a.createElement("option",{value:"wantToRead"===h,onClick:function(){t(a,"wantToRead")}},"wantToRead"===h&&String.fromCharCode(10003),"Want to Read"),o.a.createElement("option",{value:"read"===h,onClick:function(){t(a,"read")}},"read"===h&&String.fromCharCode(10003),"Read"),o.a.createElement("option",{value:"none"},"None")))),o.a.createElement("div",{className:"book-title"},a.title),o.a.createElement("div",{className:"book-authors"},a.authors?a.authors.map(function(e){return e===a.authors[a.authors.length-1]?"".concat(e):"".concat(e,", ")}):"unkown")))};var g=function(e){var t=e.shelftitle,a=e.shelfName,r=Object(n.useState)([]),c=Object(u.a)(r,2),l=c[0],s=c[1];return Object(n.useEffect)(function(){k().then(function(e){return s(e.filter(function(e){return e.shelf===a}))})},[]),Object(n.useEffect)(function(){k().then(function(e){return s(e.filter(function(e){return e.shelf===a}))})},[l]),o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},t),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},l.map(function(e){return o.a.createElement(v,{book:e,key:e.id})}))))};var N=function(e){return o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"MyReads")),o.a.createElement("div",{className:"list-books-content"},o.a.createElement("div",null,o.a.createElement(g,{shelftitle:"currently reading",shelfName:"currentlyReading"}),o.a.createElement(g,{shelfName:"wantToRead",shelftitle:"want to read"}),o.a.createElement(g,{shelftitle:"read",shelfName:"read"}))),o.a.createElement("div",{className:"open-search"},o.a.createElement(i.a,{to:"/search"},o.a.createElement("button",null," Add a book"))))},y=a(13),j=a(14),O=a(17),C=a(15),w=a(18),S=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(O.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(o)))).state={query:"",books:[]},a.Updatebooks=function(e){p(e.trim()).then(function(e){e&&!e.error?a.setState({books:e}):a.setState({books:[]})})},a}return Object(w.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this,t=this.props.getbookshelf;return o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(i.a,{className:"close-search",to:"/"},"Close"),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",placeholder:"Search by title or author",onChange:function(t){return e.Updatebooks(t.target.value)}}))),o.a.createElement("div",{className:"search-books-results"},o.a.createElement("ol",{className:"books-grid",children:this.state.books.map(function(e){return o.a.createElement(v,{book:e,key:e.id,bookshelf:t})})})))}}]),t}(n.Component);var R=function(e){return o.a.createElement("div",{className:"app"},o.a.createElement(s.a,{exact:!0,path:"/",render:function(){return o.a.createElement(N,null)}}),o.a.createElement(s.a,{exact:!0,path:"/search",render:function(){return o.a.createElement(S,null)}}))};a(33);c.a.render(o.a.createElement(l.a,null,o.a.createElement(R,null)),document.getElementById("root"))},5:function(e,t,a){}},[[19,2,1]]]);
//# sourceMappingURL=main.231cf8de.chunk.js.map